<div class="dialog-header" style="display:flex; justify-content: space-between; align-items: center; padding: 1rem; border-bottom: 1px solid #ccc;">
  <h2>Formulario de producto</h2>
  <button mat-icon-button aria-label="Cerrar" (click)="cerrar()">
    <mat-icon>close</mat-icon>
  </button>
</div>

<form (ngSubmit)="guardarProducto()" #formProducto="ngForm" class="dialog-content" style="padding: 1rem;">
  <mat-form-field appearance="fill" class="w-full mb-4">
    <mat-label>Código</mat-label>
    <input matInput required name="codigo" [(ngModel)]="producto.codigo" #codigo="ngModel" />
    <mat-error *ngIf="codigo.invalid && codigo.touched">El código es obligatorio</mat-error>
  </mat-form-field>

  <mat-form-field appearance="fill" class="w-full mb-4">
    <mat-label>Nombre</mat-label>
    <input matInput required name="nombre" [(ngModel)]="producto.nombre" #nombre="ngModel" />
    <mat-error *ngIf="nombre.invalid && nombre.touched">El nombre es obligatorio</mat-error>
  </mat-form-field>

  <mat-form-field appearance="fill" class="w-full mb-4">
    <mat-label>Descripción</mat-label>
    <textarea matInput name="descripcion" [(ngModel)]="producto.descripcion"></textarea>
  </mat-form-field>

  <mat-form-field appearance="fill" class="w-full mb-4">
    <mat-label>Costo de compra</mat-label>
    <input type="number" min="0" matInput name="costoCompra" [(ngModel)]="producto.costoCompra" />
  </mat-form-field>

  <mat-form-field appearance="fill" class="w-full mb-4">
    <mat-label>Precio de venta</mat-label>
    <input type="number" min="0" matInput name="precioVenta" [(ngModel)]="producto.precioVenta" />
  </mat-form-field>

  <mat-form-field appearance="fill" class="w-full mb-4">
    <mat-label>Cantidad</mat-label>
    <input type="number" min="0" matInput name="cantidad" [(ngModel)]="producto.cantidad" />
  </mat-form-field>

  <mat-form-field appearance="fill" class="w-full mb-4">
    <mat-label>Categoría</mat-label>
    <mat-select name="categoriaId" [(ngModel)]="producto.categoria.id" required>
      <mat-option *ngFor="let cat of categorias" [value]="cat.id">{{ cat.nombre }}</mat-option>
    </mat-select>
  </mat-form-field>



  <div class="w-full mb-4">
    <label for="imagen">Imagen:</label>
    <input type="file" id="imagen" (change)="onFileSelected($event)">
  </div>


  <div style="text-align: right;">
    <button mat-button type="button" (click)="cerrar()">Cancelar</button>
    <button mat-raised-button color="primary" type="submit" [disabled]="formProducto.invalid">Guardar</button>
  </div>
</form>
